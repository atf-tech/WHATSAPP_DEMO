<style>
  .chat-header {
    background: #ededed;
    padding: 10px;
    font-weight: bold;
  }

  .messages {
    height: 65vh;
    overflow-y: auto;
    padding: 10px;
    background: #e5ddd5;
  }

  .msg {
    margin-bottom: 8px;
    padding: 8px 10px;
    border-radius: 6px;
    max-width: 70%;
    clear: both;
  }

  .msg.in {
    background: white;
    float: left;
  }

  .msg.out {
    background: #dcf8c6;
    float: right;
  }

  .input-box {
    background: #f0f0f0;
    padding: 10px;
    display: flex;
  }

  .input-box input {
    flex: 1;
    padding: 10px;
    border: none;
  }

  .input-box button {
    padding: 10px;
    background: #25d366;
    border: none;
    color: white;
  }
</style>

<div class="chat-header">
  {{ conversation.donor.phone_number }}
</div>

<!-- IMPORTANT: stable container for HTMX + WS -->
<div id="chat-container" data-conversation-id="{{ conversation.id }}">
  <div class="messages" id="messages">
    {% include "chat/partials/messages.html" %}
  </div>
</div>

<form class="input-box"
      hx-post="{% url 'send-message' conversation.id %}"
      hx-swap="none"
      hx-on="htmx:afterRequest:this.reset()">

  {% csrf_token %}
  <input type="text" name="text" placeholder="Type a message..." required>
  <button type="submit">Send</button>
</form>
